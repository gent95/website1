var nav_htm = "<div class='nav' style='border-bottom: 1px solid #e3e3e3; z-index: 9999;'> <div class='list' id='navlist'>  <div style='width: 1200px; text-align: center;'> <div style='margin-right: 80px; float:left;'> <img src='${ctxStatic}/frontImg/homepage/logo.png'/> </div> <ul id='navfouce'> <li><a href='#'>解决方案</a></li> <li><a href='#'>产品</a></li> <li><a href='#'>服务</a></li> <li><a href='#'>技术支持</a></li> <li><a href='#'>合作伙伴</a></li> <li><a href='#'>行业动态</a></li> </ul> </div> </div> <div class='box' id='navbox' style=' height:0px;opacity:0;overflow:hidden; position: relative; left: 1px; top: 0px; margin: 0px; padding: 0px;'> <div class='cont' style='display:none;'> <div class='text_cont'> <span> <p style='color: #f18a22; font-size: 20px; margin-bottom: 18px;'>智慧农业</p> <p><a href='/wapsolution/busnesRef'>行业介绍</a></p> <p><a href='/wapsolution/programSummany'>方案概述</a></p> <p><a href='/wapsolution/packgeproduct'>方案产品</a></p> <p><a href='/wapsolution/planDeploy'>方案部署</a></p> <p><a href='/wapsolution/projectValue'>方案价值</a></p> <p><a href='/wapsolution/applicationCase'>应用案例</a></p> <p><a href='/wapsolution/relevantData'>相关资料</a></p> </span> <span> <p style='color: #f18a22; font-size: 20px;  margin-bottom: 18px;'>智慧园区</p> <p><a href='/wapsolution/busnesRef'>行业介绍</a></p> <p><a href='/wapsolution/programSummany'>方案概述</a></p> <p><a href='/wapsolution/packgeproduct'>方案产品</a></p> <p><a href='/wapsolution/planDeploy'>方案部署</a></p> <p><a href='/wapsolution/projectValue'>方案价值</a></p>  <p><a href='/wapsolution/applicationCase'>应用案例</a></p> <p><a href='/wapsolution/relevantData'>相关资料</a></p> </span> <span style='margin-right:0px;'> <p style='color: #f18a22; font-size: 20px;  margin-bottom: 18px;'>智慧社区</p> <p><a href='/wapsolution/busnesRef'>行业介绍</a></p> <p><a href='/wapsolution/programSummany'>方案概述</a></p> <p><a href='/wapsolution/packgeproduct'>方案产品</a></p> <p><a href='/wapsolution/planDeploy'>方案部署</a></p> <p><a href='/wapsolution/projectValue'>方案价值</a></p> <p><a href='/wapsolution/applicationCase'>应用案例</a></p> <p><a href='/wapsolution/relevantData'>相关资料</a></p> </span> </div> </div> <div class='cont' style='display:none;'> <div class='img_cont'> <span> <a href='/forworld/AgrInternet' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/009.png'/></p> <p>农业互联网监控系统</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px; margin-top: 10px'></div> <p>Monitoring System</p> </a> </span> <span> <a href='/forworld/AgrInternet' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/010.png'/></p> <p>水肥一体机</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px; margin-top: 10px;'></div> <p>Integrative Water And Fertilizer</p>  </a> </span> <span style='margin-right: 0px;'> <a href='/forworld/AgrInternet' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/011.png'/></p> <p>大棚</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px;margin-top: 10px;'></div> <p>Greehouse</p> </a> </span> </div> </div> <div class='cont' style='display:none;'> <div class='img_cont1'> <span> <a href='/forworld/AgrInternet' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/004.png'/></p> <p>智能谷云平台</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px;margin-top: 10px;'></div> <p>Wisdom Valley cloud platform</p> </a>  </span> <span style='margin-right: 0px;'> <a href='/forworld/AgrInternet' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/003.png'/></p> <p>定制化软件开发</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px; margin-top: 10px;'></div> <p>Customized software development</p>  </a> </span> </div> </div> <div class='cont' style='display:none;'> <div class='img_cont'> <span> <a href='/problemPost/get' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/001.png'/></p> <p>问题提交</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px;margin-top: 10px;'></div> <p>Problem submission</p>  </a> </span> <span> <a href='/ceap/get' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/002.png'/></p> <p>客服邮箱&客户电话</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px; margin-top: 10px;'></div> <p>Telephone and fuel tank</p> </a> </span> <span style='margin-right: 0px;'> <a href='/resourceDow/get' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/003.png'/></p> <p>资料下载</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px; margin-top: 10px;'></div> <p>Data download</p> </a> </span> </div> </div> <div class='cont' style='display:none;'> <div class='text_cont1'> <span> <p href='#' style='color: #f18a22; font-size: 20px; margin-bottom: 18px;'>合作伙伴计划</p> <p><a href='/wappartner/policy'>渠道伙伴政策</a></p> <p><a href='/wappartner/technical'>集萃技术认证</a></p> <p><a href='/wappartner/businessPlan'>企业业务解决方案伙伴计划</a></p> </span> <span> <p style='color: #f18a22; font-size: 20px; margin-bottom: 18px;'>合作伙伴展示</p> <p><a href='/wappartner/partner'>渠道伙伴</a></p> <p><a href='/wappartner/coalitionPartner'>联盟伙伴</a></p> </span> <span style='margin-right: 0px;'> <p style='color: #f18a22; font-size: 20px; margin-bottom: 18px;'>获取资源</p> <p><a href='/wappartner/partnerCollge'>合作伙伴大学</a></p> </span> </div> </div> <div class='cont' style='display:none;'> <div class='img_cont'> <span> <a href='/industryInfo/news' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/006.png'/></p> <p>行业新闻</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px;margin-top: 10px;'></div> <p>Industry New</p> </a> </span> <span> <a href='/industryInfo/policies' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/007.png'/></p> <p>相关政策</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px; margin-top: 10px;'></div> <p>Policies</p> </a> </span> <span style='margin-right: 0px;'> <a href='/industryInfo/exhibitionActivity' style='text-decoration: none; color: #0C0C0C'> <p style='margin-bottom: 22px;'><img src='${ctxStatic}/frontImg/homepage/008.png'/></p> <p>展会活动</p> <div style='border-bottom:3px solid #f18a22; width: 26px; margin: 0 auto; margin-bottom: 15px;margin-top: 10px;'></div> <p>exhibition activity</p> </a> </span> </div> </div> </div> </div>";
$(function () {
    $.ajax({
        url: "/wapNavList/list",
        type: "post",
        dataType: "json",
        success: function (json) {
            var _htm = getNav(json);
            init(_htm);
        }
    });
});
//通过json拼接htm
function getNav(json) {
    var _html = "<div class='nav' style='border-bottom: 1px solid #e3e3e3; z-index: 9999;'>";
    _html += " <div class='list' id='navlist'> <div style='width: 1200px; text-align: center;'> <div style='margin-right: 80px; float:left;'> <img src='/static/frontImg/homepage/logo.png'/> </div>";
    //塑造一级导航头
    _html += "<ul id='navfouce'>";
    for (var i = 0; i < json.length; i++) {
        _html += " <li><a href='" + json[i].url + "'>" + json[i].name + "</a></li>";
    }
    _html += "</ul></div> </div>";
    //获取子节点树形
    _html += "  <div class='box' id='navbox' style=' height:0px;opacity:0;overflow:hidden; position: relative; left: 1px; top: 0px; margin: 0px; padding: 0px;'> <div class='cont' style='display:none;'> <div class='text_cont'> <span>";
    for (var i = 0; i < json.length; i++) {
        var children = json[i].child();
        //标签数据
        if (children.child()[0].type == 1) {
            for(var i = 0; i < children.length; i++){
            }
            //图片类型
        } else {

        }
    }
    _html += '</div>';
    return _html;
}

function getImgChild() {
}
function getArticleChild() {
}
function init(nav_htm) {
    $(".nav_menu").html(nav_htm);

}


$(function () {
    var time = null;
    var list = $("#navlist");
    var box = $("#navbox");
    var lista = list.find("a");
    for (var i = 0, j = lista.length; i < j; i++) {
        if (lista[i].className == "now") {
            var olda = i;
        }
    }
    var box_show = function (hei) {
        box.stop().animate({
            height: hei,
            opacity: 1
        }, 400);
    }
    var box_hide = function () {
        box.stop().animate({
            height: 0,
            opacity: 0
        }, 400);
    }
    lista.hover(function () {
        lista.removeClass("now");
        $(this).addClass("now");
        clearTimeout(time);
        var index = list.find("a").index($(this));
        box.find(".cont").hide().eq(index).show();
        var _height = box.find(".cont").eq(index).height() + 54;
        box_show(_height)
    }, function () {
        time = setTimeout(function () {

            box.find(".cont").hide();

            box_hide();

        }, 50);

        lista.removeClass("now");

        lista.eq(olda).addClass("now");

    });


    box.find(".cont").hover(function () {

        var _index = box.find(".cont").index($(this));

        lista.removeClass("now");

        lista.eq(_index).addClass("now");

        clearTimeout(time);

        $(this).show();

        var _height = $(this).height() + 54;

        box_show(_height);

    }, function () {

        time = setTimeout(function () {

            $(this).hide();

            box_hide();

        }, 50);

        lista.removeClass("now");

        lista.eq(olda).addClass("now");

    });
})();